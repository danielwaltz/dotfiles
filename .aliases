alias c="clear"
alias src="source ~/.zshrc"
alias dotfiles="$EDITOR ~/.dotfiles"
alias dprune="docker system prune"
alias https-server="openssl req -newkey rsa:2048 -new -nodes -x509 -days 3650 -keyout key.pem -out cert.pem -subj '/CN=localhost' && npx http-server -S -p 5000 ."

prettyall() {
  DIR="${1:-.}"

  EXCLUDE_DIRS="node_modules,vendor,build,dist,coverage,platforms,.nuxt,.next"

  # Prefer using local prettier bin if available
  if [ -f ./node_modules/.bin/prettier ]; then
    PRETTIER_BIN="./node_modules/.bin/prettier"
  else
    PRETTIER_BIN="prettier"
  fi

  $PRETTIER_BIN --write "$DIR/**/*.{js,jsx,ts,tsx,css,scss,sass,html,vue,graphql,gql,json,md,yaml}" "!$DIR/{$EXCLUDE_DIRS}/**/*"
}

if [[ $OS == "Darwin" ]]; then
  update() {
    echo '\e[32m\uf0fc Brew'
    brew update && brew upgrade && brew upgrade --cask
    brew bundle dump --force

    echo '\e[32m\ue713 Mac'
    mas upgrade

    echo '\e[32m\uf1b2 rtx'
    rtx install bun@latest && rtx global bun@latest
    rtx install deno@latest && rtx global deno@latest
    rtx install nodejs@latest && rtx global nodejs@latest
    rtx install pnpm@latest && rtx global pnpm@latest
    rtx install ruby@latest && rtx global ruby@latest
    rtx install yarn@latest && rtx global yarn@latest

    echo '\e[32m\ue795 zsh'
    omz update
  }

  alias dsdestroy="find . -name '*.DS_Store' -type f -ls -delete"

  clean() {
    echo '\e[32m\uf0fc Brew'
    brew cleanup

    echo '\e[32m\ue71e Node'
    npm cache clean --force
    yarn cache clean

    echo '\e[32m\uf308 Docker'
    docker system prune --force

    echo '\e[32m\ue713 Mac'
    dsdestroy
  }

  flushcache() {
    sudo dscacheutil -flushcache
    sudo killall -HUP mDNSResponder
    echo 'DNS Cache Cleared'
  }

  alias spacer="defaults write com.apple.dock persistent-apps -array-add '{tile-type=\"spacer-tile\";}' && killall Dock"
  alias minispacer="defaults write com.apple.dock persistent-apps -array-add '{tile-type=\"small-spacer-tile\";}' && killall Dock"
fi

if [[ $OS == "Linux" ]]; then
  update() {
    echo 'System'
    sudo apt-get update && sudo apt-get -y upgrade

    echo '\e[32m\uf0fc Brew'
    brew update && brew upgrade
  }

  alias open="gio open"
fi

[ -f ~/.dotfiles/private/.aliases ] && source ~/.dotfiles/private/.aliases
